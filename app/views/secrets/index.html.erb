<% content_for :title, t('global.secrets') %>

<h1 style="text-align: center; color: #007BFF; font-size: 3em; margin-top: 20px;">
  <%= t('global.secrets') %>
</h1>

<!-- new secret btn -->
<div style="text-align: left; margin: 20px auto; max-width: 1200px;">
  <%= link_to t('secrets.new-link'), new_secret_path, style: "
    display: inline-block;
    padding: 10px 20px;
    background-color: #28a745;
    color: white;
    font-size: 1em;
    text-decoration: none;
    border-radius: 5px;
    transition: background-color 0.3s ease;" %>
</div>

<!-- display section van al de secrets -->
<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin: 20px auto; max-width: 1200px;">
  <% @secrets.each do |secret| %>
    <div class="secret-box" style="width: 300px; border: 1px solid #ddd; border-radius: 10px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); background-color: #fff; overflow: hidden; transition: transform 0.2s ease, box-shadow 0.2s ease; cursor: pointer;"
         onclick="window.location.href='<%= secret_path(secret) %>'">

      <!-- Image Thumbnail -->
      <% if secret.image.attached? %>
        <div style="height: 150px; overflow: hidden;">
          <%= image_tag(secret.image, alt: secret.name, style: "width: 100%; height: 100%; object-fit: cover;") %>
        </div>
      <% end %>

      <!-- Content Section -->
      <div style="padding: 15px; text-align: center;">
        <!-- Secret Name -->
        <h2 style="font-size: 1.5em; color: #333; margin-bottom: 10px;">
          <%= secret.name %>
        </h2>

        <!-- Secret Description -->
        <% if secret.description.present? %>
          <p style="color: #555; font-size: 0.9em; margin-bottom: 10px;">
            <%= truncate(secret.description, length: 80, omission: '...') %>
          </p>
        <% else %>
          <p style="color: #aaa; font-size: 0.9em; margin-bottom: 10px;">
            <%= t('secrets.no_description') %>
          </p>
        <% end %>

        <!-- adress -->
        <% if secret.address.present? %>
          <p style="color: #666; font-size: 0.9em; margin-bottom: 10px;">
            <strong><%= t('secrets.address') %>:</strong> <%= secret.address %>
          </p>
        <% end %>

        <!-- user -->
        <div style="color: #777; font-size: 0.8em;">
          <%= t('global.user') %> <strong><%= secret.user.email if secret.user.present? %></strong>
        </div>
      </div>
    </div>
  <% end %>
</div>

<style>
  .secret-box:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
  }

  a:hover {
    background-color: #218838;
  }
</style>
