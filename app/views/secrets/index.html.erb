<%= stylesheet_link_tag 'application', media: 'all' %>
<%= stylesheet_link_tag 'secret_homepage', media: 'all' %>


<h1 class="page-header" style="text-align: center; margin-top: 20px;">Secrets</h1>

<div class="action-bar" style="text-align: center; margin-bottom: 20px;">
  <%= link_to 'Create a New Secret', new_secret_path, class: 'btn-action new-link' %>
</div>

<div class="secrets-container">
  <% if @secrets.any? %>
    <% @secrets.each do |secret| %>
      <div class="secret-item">
       
        <h2 class="secret-title"><%= link_to secret.name, secret_path(secret) %></h2>

        <% if secret.image.attached? %>
          <div class="secret-image">
            <%= image_tag(secret.image, alt: secret.name, class: 'secret-thumbnail') %>
          </div>
        <% end %>

        <% if secret.description.present? %>
          <p class="secret-description">
            <%= truncate(secret.description, length: 100, omission: '...') %>
          </p>
        <% else %>
          <p class="secret-description">No description available.</p>
        <% end %>

        <div class="secret-meta">
          <p>Created by: <strong><%= secret.user.email if secret.user.present? %></strong></p>
          <p>Created on: <%= secret.created_at.strftime('%B %d, %Y') %></p>
        </div>
      </div>
    <% end %>
  <% else %>
    <p class="no-secrets" style="text-align: center;">No secrets available yet. Be the first to add one!</p>
  <% end %>
</div>

